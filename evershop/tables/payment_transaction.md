# payment_transaction
「payment_transaction」テーブルは、支払い取引情報を格納するデータベーステーブルで、取引IDや金額などの情報が含まれています。このテーブルの目的は、支払い取引の詳細を追跡し、注文と関連付けること、および取引の種類や状態に応じた処理を行い、追加情報を保存することです。

| Column name | type | PK | FK | required | description | code_reference |
| --- | --- | --- | --- | --- | --- | --- |
| payment_transaction_id | int unsigned | True | False | True | <br><br>「payment_transaction_id」列は、支払い取引テーブルの主キーとして機能し、他のテーブルとの関係を確立するために使用されます。この列は、「payment_transaction_order_id」列や他のテーブルとリンクするために使用されます。 | [link](../references/payment_transaction_payment_transaction_id.md) |
| uuid | varchar(36) | False | False | True | <br><br>「payment_transaction」テーブルの「uuid」列は、各行のユニークな識別子として機能します。この列は、varchar（36）でNOT NULL制約と、replace（uuid（）、'-''）のデフォルト値が設定されています。また、一意性を確保するためにUNIQUE KEYが割り当てられています。バージョン1.0.0では、新しい行ごとにランダムなUUIDが自動的に生成され挿入されますが、バージョン1.0.1ではALTER TABLEを使用してUUIDが生成され、各行のユニークな識別子として機能します。 | [link](../references/payment_transaction_uuid.md) |
| payment_transaction_order_id | int unsigned | False | True | True | <br><br>「payment_transaction_order_id」列は、支払いトランザクションを関連付けられた注文にリンクする外部キーとして「payment_transaction」テーブルに存在します。この列は、特定の注文に関連する支払いトランザクションを検索したり、新しい支払いトランザクションを作成したり、注文の支払い状況を更新するために使用されます。また、テーブルから支払いトランザクションを取得する条件としても使用されます。 | [link](../references/payment_transaction_payment_transaction_order_id.md) |
| transaction_id | varchar(100) | False | False | False | <br><br>「payment_transaction」テーブルの「transaction_id」列は、各トランザクションの一意の識別子として機能し、重複エントリーを防止するためのUNIQUE KEYとして使用されます。この列は、PayPalおよびStripe APIからのトランザクションIDを格納するために使用され、また「order_activity」テーブルのレコードを識別するためにも使用されます。 | [link](../references/payment_transaction_transaction_id.md) |
| transaction_type | char(255) | False | False | True | <br><br>「transaction_type（取引タイプ）」列は、「payment_transaction（支払い取引）」テーブルで使用され、オンラインまたはオフラインなどの支払い取引の種類を示し、承認、キャプチャ、返金されたかどうかを示します。この列は、異なる種類の支払い取引を区別し、各種類に適切な処理を決定するために使用されます。 | [link](../references/payment_transaction_transaction_type.md) |
| amount | decimal(12,4) | False | False | True | <br><br>「amount（金額）」列は、「payment_transaction（支払い取引）」テーブル内で、各取引の支払い金額を表します。この列は、取引の詳細を表示し、支払い情報を追跡し、PayPal、Stripe、代金引換などのさまざまな支払い方法の支払い金額を保存するために使用されます。 | [link](../references/payment_transaction_amount.md) |
| parent_transaction_id | varchar(100) | False | False | False | <br><br>「parent_transaction_id」列は、「payment_transaction」テーブルにおいて、支払いトランザクションの親トランザクションのIDを格納する列です。この列は、返金トランザクションの場合など、支払いトランザクションが親トランザクションに関連する場合にのみ使用されます。親トランザクションIDは、元の支払いトランザクションのIDです。 | [link](../references/payment_transaction_parent_transaction_id.md) |
| payment_action | varchar(15) | False | False | False | <br><br>「payment_transaction」テーブルの「payment_action」列は、トランザクションの支払いアクション（キャプチャ、承認、返金など）を示すために使用されます。この列は、支払いの状態に応じて「キャプチャ」や「承認」などの値を挿入するために使用され、支払いトランザクションの種類を識別するために使用されます。 | [link](../references/payment_transaction_payment_action.md) |
| additional_information | text | False | False | False | <br><br>「additional_information」カラムは、「payment_transaction」テーブルで支払いトランザクションに関連する追加情報を保存するために使用されます。このカラムは、PayPalのAPIから返されたJSON形式のデータを保存するために使用され、注文ID、トランザクションID、金額、通貨、ステータス、および支払いアクションなどの詳細を含みます。また、クレジットカード番号や有効期限など、支払いトランザクションに関連する追加情報も含まれる場合があります。 | [link](../references/payment_transaction_additional_information.md) |
| created_at | timestamp | False | False | True | <br><br>「payment_transaction」テーブルの「created_at」列は、新しい支払いトランザクションが作成された日時と更新された日時を記録します。この列は、テーブル内の支払いトランザクションの作成と更新時間を追跡するために使用されます。 | [link](../references/payment_transaction_created_at.md) |
