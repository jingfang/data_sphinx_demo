| path | summary | is relevant |
| --- | --- | --- |
| [packages/evershop/src/modules/paypal/api/paypalCapturePayment/[bodyParser]capture.js](https://github.com/evershopcommerce/evershop/blob/bc7ee43cdadfb8a00e896c8f753da75938507854/packages/evershop/src/modules/paypal/api/paypalCapturePayment/[bodyParser]capture.js) | このコードでは、PayPalのAPIから返されたキャプチャーIDが、テーブルpayment_transactionのカラムtransaction_idに保存されます。具体的には、insertメソッドを使用して、payment_transactionテーブルに新しい行を挿入し、transaction_idカラムにキャプチャーIDを保存しています。また、この行には、注文ID、金額、通貨、ステータス、支払いアクション、トランザクションタイプ、および追加情報も含まれます。 | True |
| [packages/evershop/src/modules/paypal/api/paypalAuthorizePayment/[bodyParser]authorize.js](https://github.com/evershopcommerce/evershop/blob/bc7ee43cdadfb8a00e896c8f753da75938507854/packages/evershop/src/modules/paypal/api/paypalAuthorizePayment/[bodyParser]authorize.js) | このコードでは、PayPalの注文を承認するためにAPIを呼び出し、その結果得られたトランザクションIDをpayment_transactionテーブルのtransaction_idカラムに保存しています。具体的には、insertメソッドを使用して、payment_transactionテーブルに新しい行を挿入し、その中にtransaction_idカラムの値を設定しています。また、このトランザクションIDは、order_activityテーブルにも保存され、注文のアクティビティとして記録されます。 | True |
| [packages/evershop/src/modules/stripe/api/stripeWebHook/[bodyJson]webhook.js](https://github.com/evershopcommerce/evershop/blob/bc7ee43cdadfb8a00e896c8f753da75938507854/packages/evershop/src/modules/stripe/api/stripeWebHook/[bodyJson]webhook.js) | このコードでは、Stripeの支払いが成功した場合に、payment_transactionテーブルに新しいレコードが挿入されます。その中には、Stripeから返されたトランザクションIDがtransaction_idカラムに保存されます。また、このトランザクションIDは、注文の支払いに関する活動ログにも記録されます。 | True |
| [packages/evershop/src/modules/checkout/migration/Version-1.0.0.js](https://github.com/evershopcommerce/evershop/blob/4f1f4947f95e03b9cf64486a42b1669d484cba61/packages/evershop/src/modules/checkout/migration/Version-1.0.0.js) | <br><br>テーブルpayment_transactionのカラムtransaction_idは、UNIQUE KEYとして使用されています。これにより、同じ注文に対して重複したトランザクションIDが登録されないようになっています。また、このカラムは、payment_transactionテーブルのレコードを一意に識別するためにも使用されます。 | True |
[Back to payment_transaction](../tables/payment_transaction.md)